<div id="page-top">
  <div id="wrapper">
    <app-header></app-header>
    <div class="d-flex flex-column" id="content-wrapper">
      <div id="content">
        <nav class="navbar navbar-light navbar-expand bg-white shadow mb-4 topbar static-top">
          <div class="container-fluid">
            <a class="btn btn-danger btn-icon-split" style="float: right;" role="button"><span class="text-white text"
                (click)="logout.logout()">Logout</span></a></div>
        </nav>
        <div class="container-fluid">
          <h3 class="text-dark mb-4">ADMIN REPORTS</h3>
          <div class="card shadow">
            <div class="card-header py-3">
              <p class="text-primary m-0 font-weight-bold">ADMIN Access&nbsp; Reports</p>
            </div>
            <div class="card-body">
              <div class="table-responsive table mt-2" id="dataTable" role="grid" aria-describedby="dataTable_info">
                <table class="table dataTable my-0" id="dataTable">
                  <thead>
                    <tr>
                      <th>Report Name</th>
                      <th>Report By</th>
                      <th>Plant Name</th>
                      <th>Report Month</th>
                      <th>Document Reference Number</th>
                      <th>Date of Report Writing</th>
                      <th>Report Link</th>
                      <th>Verified</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let report of reports; let i = index" [attr.data-index]="i">
                      <td>{{report.reportName | titlecase}}</td>
                      <td>{{report.reportby | titlecase}}</td>
                      <td>{{report.plantName | titlecase}}</td>
                      <td>{{report.reportMonth | titlecase}}</td>
                      <td>{{report.documentReferenceNumber}}</td>
                      <td>{{report.dateOfReportWriting | date}}</td>
                      <td><button (click)="openUrl(report.fileUrl)" class="btn btn-outline-secondary">Click
                          Here</button></td>

                      <!-- If the File is not validated yet -->
                      <td *ngIf="report.access === 'AdminOnly' && !report.showInput"><button class="alert alert-danger"
                          (click)="changeAccess(i)">Upload Validated File</button></td>

                      <!-- Upload the new validated file -->
                      <input *ngIf="report.showInput" class="alert alert-info" type="file"
                        (change)="onSelectedFile($event)"><button *ngIf="report.showInput" class="btn btn-info"
                        (click)="validate(i)">Upload</button>
                      <br *ngIf="loading"><br *ngIf="loading">
                      <div *ngIf="report.loading" class="spinner-border" role="status">
                        <span class="sr-only">Loading...</span>
                      </div>

                      <!-- If the file is validated -->
                      <td *ngIf="report.access === 'plant'"><button class="alert alert-success">Validated</button></td>
                      <td><span class="btn btn-danger" (click)="deleteReport(report.id)">Delete Report</span></td>
                    </tr>
                  </tbody>
                  <tfoot>
                    <tr>
                      <td><strong>Report Name</strong></td>
                      <td><strong>Report By</strong></td>
                      <td><strong>Plant Name</strong></td>
                      <td><strong>Report Month</strong></td>
                      <td><strong>Document Reference Number</strong></td>
                      <td><strong>Date of Report Writing</strong></td>
                      <td><strong>Report Link</strong></td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <app-footer></app-footer>
    </div><a class="border rounded d-inline scroll-to-top" href="#page-top"><i class="fas fa-angle-up"></i></a>
  </div>
</div>